import React, { Component } from 'react';
import { connect } from 'react-redux';
<<<<<<< Updated upstream
import ResourcesActions from '../Data/Redux/ResourcesRedux';
import NeedsActions from '../Data/Redux/NeedsRedux';
=======
// import ResourcesActions from '../Data/Redux/ResourcesRedux';
import ProfileDetails from '../Presentational/ProfileDetails';
import BeneficiaryCard from '../Presentational/BeneficiaryCard';

import GridList from 'material-ui/GridList';
>>>>>>> Stashed changes

class Home extends Component {
  constructor() {
    super();
    this.state = {
      profileDetailsIsOpen: false,
      profileDetailsId: 0
    }
    this.handleCloseProfileDetails = this.handleCloseProfileDetails.bind(this);
    this.handleOpenProfileDetails = this.handleOpenProfileDetails.bind(this);
  }

  componentDidMount() {
<<<<<<< Updated upstream
    this.props.getResources(); 
    this.props.getNeeds();
=======
    // this.props.getResources();
  }

  componentWillMount() {
    // const { userId, getNeeds } = this.props
    // getNeeds(userId)
    this.beneficiaries = [
      {
        id: 1,
        nombre: "Caritas",
        ubicacion: {lat: '123.5', lon: '131.8'},
        recursos: [
          {
            id: 1,
            nombre: "agua",
            cantidad: 3,
            unidad: "litros",
          },
          {
            id: 2,
            nombre: "atun",
            cantidad: 100,
            unidad: "gramos",
          },
          {
            id: 3,
            nombre: "cobijas",
            cantidad: 3,
            unidad: "cobijas",
          }
        ]
      },
      {
        id: 1,
        nombre: "Cruz Roja",
        ubicacion: {lat: '23', lon: '31'},
        recursos: [
          {
            id: 1,
            nombre: "agua",
            cantidad: 3,
            unidad: "litros",
          },
          {
            id: 2,
            nombre: "atun",
            cantidad: 100,
            unidad: "gramos",
          },
          {
            id: 3,
            nombre: "cobijas",
            cantidad: 3,
            unidad: "cobijas",
          }
        ]
      },
      {
        id: 1,
        nombre: "Mely",
        ubicacion: {lat: '3', lon: '311'},
        recursos: [
          {
            id: 1,
            nombre: "agua",
            cantidad: 3,
            unidad: "litros",
          },
          {
            id: 2,
            nombre: "atun",
            cantidad: 100,
            unidad: "gramos",
          },
          {
            id: 3,
            nombre: "cobijas",
            cantidad: 3,
            unidad: "cobijas",
          }
        ]
      },
    ];

    this.user = {
      name: "Admin",
      type: "Beneficiario"
    }
>>>>>>> Stashed changes
  }
  
  handleCloseProfileDetails = (id) => {
    this.setState({
      profileDetailsIsOpen: false,
      profileDetailsId: id
    });
  }

  handleOpenProfileDetails = (id) => {
    this.setState({
      profileDetailsIsOpen: true,
      profileDetailsId: id
    });
  }

  render() {
    return (
      <div>
        <GridList>
        {this.beneficiaries.map((b, index) => 
          <BeneficiaryCard 
            beneficiary={b} 
            openProfileDetails={() => this.openProfileDetails}
            user={this.user}/>
        )}
        </GridList>

      <ProfileDetails
        open = {this.state.profileDetailsIsOpen}
        user = {this.user}
        close = {this.handleCloseProfileDetails} />
      </div>
    )
  }
}
const mapStateToProps = (state, ownProps) => ({})

const mapDispatchToProps = dispatch => ({
<<<<<<< Updated upstream
  getResources: () => dispatch(ResourcesActions.getRequest()),
  getNeeds: data => dispatch(NeedsActions.getOneRequest(data)),
=======
  // getResources: () => dispatch(ResourcesActions.getRequest()),
>>>>>>> Stashed changes
});

export default connect(mapStateToProps, mapDispatchToProps)(Home);